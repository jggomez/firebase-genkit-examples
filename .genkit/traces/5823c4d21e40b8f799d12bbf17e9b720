{"traceId":"5823c4d21e40b8f799d12bbf17e9b720","spans":{"6a1e1fc85fc5b444":{"spanId":"6a1e1fc85fc5b444","traceId":"5823c4d21e40b8f799d12bbf17e9b720","parentSpanId":"0ce5b5e23db6d130","startTime":1734412506041,"endTime":1734412507103.2966,"attributes":{"genkit:type":"action","genkit:name":"googleai/gemini-1.5-flash","genkit:path":"/{generate,t:helper}/{googleai/gemini-1.5-flash,t:action,s:model}","genkit:input":"{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"I want 5 commons quotes by Tyrion in GOT\"}]}],\"config\":{},\"tools\":[{\"name\":\"getQuotesGameOfThrones\",\"description\":\"A free API to retrieve some quotes of Game of Thrones\",\"outputSchema\":{\"type\":\"object\",\"properties\":{\"quotes\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"quotes\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"},\"inputSchema\":{\"type\":\"object\",\"properties\":{\"characterName\":{\"type\":\"string\"},\"numQuotes\":{\"type\":\"number\",\"default\":1}},\"required\":[\"characterName\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}],\"output\":{}}","genkit:metadata:subtype":"model","genkit:output":"{\"candidates\":[{\"index\":0,\"message\":{\"role\":\"model\",\"content\":[{\"toolRequest\":{\"name\":\"getQuotesGameOfThrones\",\"input\":{\"characterName\":\"Tyrion Lannister\",\"numQuotes\":5}}}]},\"finishReason\":\"stop\",\"custom\":{}}],\"custom\":{\"candidates\":[{\"content\":{\"parts\":[{\"functionCall\":{\"name\":\"getQuotesGameOfThrones\",\"args\":{\"characterName\":\"Tyrion Lannister\",\"numQuotes\":5}}}],\"role\":\"model\"},\"finishReason\":\"STOP\",\"avgLogprobs\":-0.021225320441382273}],\"usageMetadata\":{\"promptTokenCount\":77,\"candidatesTokenCount\":14,\"totalTokenCount\":91},\"modelVersion\":\"gemini-1.5-flash\"},\"usage\":{\"inputCharacters\":40,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":0,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":77,\"outputTokens\":14,\"totalTokens\":91},\"latencyMs\":1061.3477079868317}","genkit:state":"success"},"displayName":"googleai/gemini-1.5-flash","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"0b737c7d134bfa8f":{"spanId":"0b737c7d134bfa8f","traceId":"5823c4d21e40b8f799d12bbf17e9b720","startTime":1734412507156,"endTime":1734412507445.5784,"attributes":{"genkit:type":"action","genkit:name":"getQuotesGameOfThrones","genkit:path":"/{generate,t:helper}/{getQuotesGameOfThrones,t:action,s:tool}","genkit:input":"{\"characterName\":\"Tyrion Lannister\",\"numQuotes\":5}","genkit:metadata:subtype":"tool","genkit:state":"error"},"displayName":"getQuotesGameOfThrones","links":[],"spanKind":"INTERNAL","parentSpanId":"0ce5b5e23db6d130","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"Cannot read properties of undefined (reading 'forEach')"},"timeEvents":{"timeEvent":[{"time":1734412507445.4714,"annotation":{"attributes":{"exception.type":"TypeError","exception.message":"Cannot read properties of undefined (reading 'forEach')","exception.stacktrace":"TypeError: Cannot read properties of undefined (reading 'forEach')\n    at <anonymous> (/Users/jggomez/Documents/jggomez/code/firebase-genkit-examples/src/11_tool_calling.ts:56:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"},"description":"exception"}}]},"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"}}}}